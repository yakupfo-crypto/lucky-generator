<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lucky Generator</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f2f6fb;
  padding-bottom: 100px;
}

header{
  background:#1976d2;
  color:white;
  padding:20px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
}

.container{ padding:20px; }

.card{
  background:white;
  padding:15px;
  border-radius:10px;
  margin-bottom:15px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}

input{
  width:100%;
  padding:8px;
  margin:5px 0 10px 0;
}

button{
  background:#1976d2;
  color:white;
  border:none;
  padding:10px;
  width:100%;
  border-radius:6px;
  font-size:16px;
}

.bottom-nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:#1976d2;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
}

.bottom-nav button{
  background:none;
  color:white;
  border:none;
}
</style>
</head>

<body>

<header>Lucky Generator</header>

<div class="container" id="generatePage">

<div class="card">
<label>Toplam Sayı</label>
<input type="number" id="maxNumber" value="34">

<label>Kolon Başına</label>
<input type="number" id="perSet" value="5">

<label>Joker</label>
<input type="number" id="jokerCount" value="1">

<label>Kolon Sayısı</label>
<input type="number" id="setCount" value="5">

<button onclick="generateSets()">Kolonları Üret</button>
</div>

<div id="results"></div>

</div>

<div class="container" id="mySetsPage" style="display:none;">
<h3>My Sets</h3>
<div id="savedSets"></div>
</div>

<div class="bottom-nav">
<button onclick="showGenerate()">Generate</button>
<button onclick="showMySets()">My Sets</button>
</div>

<script>
let generatedSets=[];
let savedGroups=JSON.parse(localStorage.getItem("savedGroups"))||[];
let groupCounter=savedGroups.length>0
?Math.max(...savedGroups.map(g=>g.id))+1
:1;

let selectedNumbers=[];

// ================== GENERATE ==================

function generateSets(){
const max=parseInt(maxNumber.value);
const per=parseInt(perSet.value);
const joker=parseInt(jokerCount.value);
const count=parseInt(setCount.value);

generatedSets=[];
selectedNumbers=[];

for(let i=0;i<count;i++){
let numbers=[];
while(numbers.length<per){
let n=Math.floor(Math.random()*max)+1;
if(!numbers.includes(n)) numbers.push(n);
}
numbers.sort((a,b)=>a-b);

let jokers=[];
while(jokers.length<joker){
let j=Math.floor(Math.random()*max)+1;
if(!jokers.includes(j)) jokers.push(j);
}

generatedSets.push({numbers,jokers});
}

displayGenerated();
}

// ================== EKRANA BAS ==================

function displayGenerated(){
let html="";

generatedSets.forEach((set,i)=>{

html+=`<div class="card"><b>${i+1})</b><div class="set-row">`;

set.numbers.forEach(n=>{
let active = selectedNumbers.includes(n) ? "match" : "";
html+=`<div class="ball ${active}">${n}</div>`;
});

set.jokers.forEach(j=>{
let active = selectedNumbers.includes(j) ? "match-joker" : "";
html+=`<div class="ball joker ${active}">${j}</div>`;
});

html+=`</div></div>`;
});

if(generatedSets.length>0){
html+=`
<div class="card">
<div id="numberPicker" class="set-row"></div>
<button onclick="checkMatches()">Kontrol Et</button>
<button onclick="saveGroup()">Kaydet</button>
</div>`;
}

results.innerHTML=html;

createNumberPicker();
}

// ================== NUMARA SEÇ ==================

function createNumberPicker(){
let html="";
for(let i=1;i<=90;i++){
html+=`<div class="ball"
onclick="toggleNumber(${i})"
id="pick-${i}">${i}</div>`;
}
numberPicker.innerHTML=html;
}

function toggleNumber(n){
let el=document.getElementById("pick-"+n);
let index=selectedNumbers.indexOf(n);

if(index>-1){
selectedNumbers.splice(index,1);
el.classList.remove("selected");
}else{
selectedNumbers.push(n);
el.classList.add("selected");
}
}

// ================== KONTROL ==================

function checkMatches(){
displayGenerated();
}

// ================== KAYDET ==================

function saveGroup(){
let name=prompt("Grup adı:");
if(!name) return;

savedGroups.push({
id:groupCounter++,
name:name,
sets:[...generatedSets]
});

localStorage.setItem("savedGroups",JSON.stringify(savedGroups));
alert("Kaydedildi");
}

// ================== SAYFA GEÇİŞ ==================

function showGenerate(){
generatePage.style.display="block";
mySetsPage.style.display="none";
}

function showMySets(){
generatePage.style.display="none";
mySetsPage.style.display="block";

let html="";
savedGroups.forEach(group=>{
html+=`<div class='card'>
<b>[${group.id}] ${group.name}</b><br>
Kolon: ${group.sets.length}<br>
<button onclick='viewGroup(${group.id})'>Görüntüle</button>
<button onclick='deleteGroup(${group.id})'>Sil</button>
</div>`;
});

savedSets.innerHTML=html;
}

// ================== MY SETS DETAY ==================

function viewGroup(id){
let group=savedGroups.find(g=>g.id===id);
if(!group) return;

let html=`<h3>${group.name}</h3>`;

group.sets.forEach((set,i)=>{
html+=`<div class="card"><b>${i+1})</b>
<div class="set-row">
${set.numbers.map(n=>`<div class="ball">${n}</div>`).join("")}
${set.jokers.map(j=>`<div class="ball joker">${j}</div>`).join("")}
</div>
</div>`;
});

html+="<button onclick='showMySets()'>Geri</button>";
savedSets.innerHTML=html;
}

// ================== SİL ==================

function deleteGroup(id){
savedGroups=savedGroups.filter(g=>g.id!==id);
localStorage.setItem("savedGroups",JSON.stringify(savedGroups));
showMySets();
}
</script>

</body>
</html>
